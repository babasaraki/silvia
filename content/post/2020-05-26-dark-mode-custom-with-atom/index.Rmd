---
title: Customizing Hugo Academic's Dark Mode with Help from Atom
author: silvia
date: '2020-05-26'
slug: dark-theme-custom-with-atom
draft: yes
categories:
  - R minis
tags:
  - scss
  - atom
  - blogdown
  - r
subtitle: Tutorial on how to customize the dark mode in Hugo's Academic theme with help from the Atom text editor package pigments.
summary: Tutorial on how to customize the dark mode in Hugo's Academic theme with help from the Atom text editor package pigments.
authors: []
lastmod: '2020-05-23T13:22:13-04:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---
# Where I started
With Alison Hill's [Up and Running with Blogdown](https://alison.rbind.io/post/2017-06-12-up-and-running-with-blogdown/) post! **Super helpful**, though because I came to it 2.5 years late, it was more like 'up and running with lots of water breaks' because I had to stop and account for changes made to the Hugo Academic theme in the meantime. 

- For example, prior to Academic version 4.6, custom CSS was added using the `plugins_css` option in `params.toml`, but [in current version 4.8](https://sourcethemes.com/academic/docs/customization/#customize-style-css), the theme supports SCSS (a superset of CSS) and a `custom.scss` file is added in the `assets/scss/` folder. 

The [going futher](https://alison.rbind.io/post/2017-06-12-up-and-running-with-blogdown/#going-further) section in Alison's post specifically talks about customizing the out-of-the-box theme and Alison directly links to her custom CSS file, which I closely referred to when changing colors in [my custom SCSS file](https://github.com/spcanelon/silvia/blob/master/assets/scss/custom.scss).

Alison's CSS helped me customize everything from text colors and fonts to alert colors and borders for Academic's light mode. At this point I had the light mode looking the way I wanted but the dark mode still used out-of-the-box colors for the most part and they **_just didn't go_**. [INSERT DARK MODE SCREENSHOT HERE]()

So I decided not to enable the dark-mode option in `params.toml` until I could figure out how to customize my stylesheet accordingly. That time has come because it turns out [it's pretty straightforward](https://github.com/gcushen/hugo-academic/issues/988#issuecomment-475896178)! 

The [Blogdown book](https://bookdown.org/yihui/blogdown/css.html) does an excellent job summarizing what you need to know about CSS. This tutorial builds on that a little by incorporating [features made possible by SCSS](https://sass-lang.com/guide) including **variables and nested syntax**. 

# Why Atom?

[Atom](https://atom.io/) is a text editor that I like to use to _modify_ any files in my website directory. I say modify because I much prefer to _create_ content for posts like this one using the [Blogdown addins in RStudio](https://bookdown.org/yihui/blogdown/rstudio-ide.html). It's such a breeze! But here's why I think Atom is a fantastic companion to the RStudio IDE:

1. **Seeing your directory files is made friendly in Tree View** when you open your website folder as a 'project folder'. You can just click on the file once to preview it and double-click if you want to actually open it. I find this to be really helpful when I can't remember which file contains what I'm looking for because I don't have to actually open each file to see what's in it.
2. **Searching for something specific is easy with the built-in search tool**. I've used this many times when I can't remember where that specific parameter (e.g. fonts) or file type (e.g. `.scss`) is located within my directory. I also find it super handy to find specific HTML color codes or color variables. This brings me to my most favorite feature in Atom...
3. **The [pigments](https://atom.io/packages/pigments) package!** Like R, Atom has a universe of handy packages and `pigments` will **display colors** behind the code text that represents it. It's kind of magical and has been a real game changer for me. Having this package will make customizing your scss file much easier on the eyes and brain.

- You may also choose to install the [highlight-selected](https://atom.io/packages/highlight-selected) package to make highlighted text easier to spot throughout your file and the [file-icons](https://atom.io/packages/file-icons) package to make it easier to discern between different file types in your tree view. You can install packages in _Atom > Preferences > Install_.

# Choose your own adventure

1. **Check out the SCSS file** linked above <i class="fas fa-hand-point-up"></i> to see how I customized my theme.
2. **Keep reading** to follow along and learn with me < class="fas fa-user-friends"></i>.

# Adding dark mode definitions to stylesheet

Looking through GitHub issues I found that including two sub-themes, one for light mode and one for dark mode, [may be considered for Academic in the future but is not a priority](https://github.com/gcushen/hugo-academic/issues/995). A related issue shared that if you use a custom CSS, you can [define `.dark .<SELECTOR-NAME> {...}` for dark mode](https://github.com/gcushen/hugo-academic/issues/988).

Not knowing what all of the options were for dark mode, I took a look at the `dark.scss` dark mode stylesheet built in to Academic in `themes/hugo-academic/assets/scss/academic/` folder. You can see the `pigments` package in action here! It makes it easier to identify elements with colors that you want to change. I'm looking at you inline code text color 
<html><span style="background-color:#44475a; color:rgb(139, 233, 253)">rgb(139, 233, 253) </span><span>.</span></html> 

[INSERT CODE SCREENSHOT FROM ATOM WITH RGB(139,233,253)]()

Another way to find the css for the element you want to change is to use your browser's web inspector tool. In the screenshot below I right-clicked on `program-mgmt.json` and then clicked on "inspect element". The element code was `.dark pre, .dark code` which you might recognize from the code in `dark.scss`. 

[INSERT SCREENSHOT OF ELEMENT INSPECTOR]()

You can copy and paste this new `.dark` theme code a new (or existing) `custom.scss` file saved in the `assets/scss/` folder of your directory to start seeing how changes you make affect the look of your site. Later on we'll change the background color of our site as an example.

# Choosing dark theme colors

Alright. Now that we have some new dark theme code in our custom file, we can move on to the exciting task of **choosing colors**! If you're looking for some inspiration, [Coolors has some dark color palettes](https://coolors.co/palettes/trending/dark). Coolors is also a great place to save colors into custom palettes. Here's a basic example of mine:

[INSERT COOLORS DARK THEME SCREENSHOT]()

If you're like me and want to design a dark theme that uses the primary and secondary colors you picked for your light theme, keep reading! I'm gonna share highlights from what I learned about dark theme design and how to ensure your color combinations meet [Web Content Accessibility Guidelines (WCAG)](https://www.w3.org/WAI/standards-guidelines/wcag/). 

The bulk of what I learned came from the extensive Material Design resources, including (of course) the [dark theme foundational material](https://www.material.io/design/color/dark-theme.html), which will look familiar if you've ever used an Android device. 

## Basics of dark theme design

- The primary **surface color** for dark themes should be dark gray, rather than black. The recommended color is #121212
<html><svg width="11" height="11"> 
<rect width="11" height="11" style="fill:#121212;stroke-width:2;stroke:#F8F8F8" />
</svg><span>.</span></html>

- As you layer components, surfaces with a higher elevation (closer to the hypothetical 'light source') should be lighter than those below it to create a visual hierarchy. This can be achieved by applying a semi-transparent white overlay to the primary dark gray surface. 

[FIGURE WITH SURFACE OVERLAYS]()

- The primary **text color** for dark themes should not be 100% opaque white (i.e. #FFFFFF 
  <html><svg width="11" height="11">
  <rect width="11" height="11"
  style="fill:#FFFFFF;stroke-width:3;stroke:#000000" />
  </svg>
  </html>
) because it can appear to bleed or blur against dark backgrounds and be difficult to read. 
- Text hierarchy is established by controlling the opacity, for example: 
  - High emphasis text is white with 87% opacity 
    <html><svg width="11" height="11"> 
    <rect width="11" height="11" 
    style="fill:rgba(255, 255, 255, 0.87);
    stroke-width:3;stroke:#000000" />
  </svg></html>
  - Medium emphasis is white with 60% opacity
    <html><svg width="11" height="11"> 
    <rect width="11" height="11" 
    style="fill:rgba(255, 255, 255, 0.60);
    stroke-width:3;stroke:#000000" />
    </svg></html>
  - Disabled text is white with 38% opacity
    <html><svg width="11" height="11"> 
    <rect width="11" height="11" 
    style="fill:rgba(255, 255, 255, 0.38);
    stroke-width:3;stroke:#000000" />
    </svg></html>

- To meet WCAG AA standard, there must be a 4.5:1 contrast level between the body text and the dark theme surface at the highest/lightest elevation. The contrast level is 7:1 for the WCAG AAA standard.
  


  
## Tools to explore palettes



  
Control opacity by using `rgba()` in CSS where alpha is between 0 and 1.

Tutorial: https://codelabs.developers.google.com/codelabs/design-material-darktheme/#0

Palette generator: https://material.io/design/color/the-color-system.html#tools-for-picking-colors

- then view in Color Tool: https://material.io/resources/color/#!/?view.left=0&view.right=0&primary.color=122140&secondary.color=e5bf00
  - personal link: https://material.io/resources/color/#!/?view.left=1&view.right=0&primary.color=122140&secondary.color=e5bf00


Contrast color calculator: https://contrast-ratio.com/


Coolors resources:
- https://coolors.co/contrast-checker/112a46-acc8e5
> This tool follows the Web Content Accessibility Guidelines (WCAG), which are a series of recommendations for making the web more accessible.
>Regarding colors, the standard defines two levels of contrast ratio: AA (minimum contrast) and AAA (enhanced contrast).
>The level AA requires a contrast ratio of at least 4.5:1 for normal text and 3:1 for large text (at least 18pt) or bold text.
> The level AAA requires a contrast ratio of at least 7:1 for normal text and 4.5:1 for large text or bold text.

  
# Using color variables in SCSS

Set variables at top of document and document changes from original Academic theme. Replace all color codes with defined variables.

Try out different dark mode colors by changing variables. Don't worry, the pigments package will still show you the variable colors! It'll even show them to you in a little drop-down menu when you're adding them.


TIP: I like using a bright color like my error color to test different CSS elements. It stands out and makes it easy to see what I modified.  

- changed background for posts/publications but home page is till eggplant -- SOLVED because it's overlaid with WIDGETS
- search bar for posts/publications is same color as background
